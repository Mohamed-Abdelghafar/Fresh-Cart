"use strict";(self.webpackChunkFreshCart=self.webpackChunkFreshCart||[]).push([[290],{5290:(f,m,s)=>{s.r(m),s.d(m,{CartComponent:()=>O});var _=s(6814),p=s(1120),t=s(4769),C=s(6286),l=s(2425);function x(r,o){if(1&r&&(t.TgZ(0,"div",33)(1,"span",34),t._uU(2),t.ALo(3,"currency"),t.qZA(),t._UZ(4,"div",35),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(2),t.hij("Cost : ",t.xi3(3,1,e.price," EGP "),"")}}function a(r,o){if(1&r&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.priceAfterDiscount," EGP "))}}function d(r,o){if(1&r&&(t.TgZ(0,"div")(1,"span",4),t._uU(2,"Cost : "),t.qZA(),t._uU(3),t.ALo(4,"currency"),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(t.xi3(4,1,e.price," EGP "))}}const h=function(r){return{"rating-color":r}};function v(r,o){if(1&r&&t._UZ(0,"i",36),2&r){const e=o.$implicit,i=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(1,h,e<=i.product.ratingsAverage))}}const b=function(){return[1,2,3,4,5]};function A(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div"),t._UZ(3,"img",13),t.qZA()(),t.TgZ(4,"div",14)(5,"div",15)(6,"div")(7,"h2",16),t._uU(8),t.qZA(),t.TgZ(9,"h3",17)(10,"span",4),t._uU(11,"Avilable in stock : "),t.qZA(),t._uU(12),t.qZA(),t.YNc(13,x,5,4,"div",18),t.YNc(14,a,3,4,"div",19),t.YNc(15,d,5,4,"div",19),t.TgZ(16,"div")(17,"span",4),t._uU(18,"Raiting : "),t.qZA(),t.TgZ(19,"span",20),t._uU(20),t.qZA()(),t.TgZ(21,"div"),t.YNc(22,v,1,3,"i",21),t.qZA(),t.TgZ(23,"button",22,23),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.MAs(24),g=t.oxw(2);return t.KtG(g.deleteItem(c.product._id,u))}),t._uU(25,"Delete"),t._UZ(26,"i",7),t.qZA()(),t.TgZ(27,"div")(28,"div",24)(29,"button",25),t.NdJ("click",function(n){t.CHM(e);const c=t.oxw(2);return t.KtG(c.increaseCount(n))}),t._UZ(30,"i",26),t.qZA(),t.TgZ(31,"span",27),t._uU(32),t.qZA(),t.TgZ(33,"button",25),t.NdJ("click",function(n){t.CHM(e);const c=t.oxw(2);return t.KtG(c.minusCount(n))}),t._UZ(34,"i",28),t.qZA(),t.TgZ(35,"div")(36,"button",29,30),t.NdJ("click",function(n){const u=t.CHM(e).$implicit,g=t.MAs(37),y=t.oxw(2);return t.KtG(y.UpdateItemCount(u.product._id,n,g))}),t._uU(38,"Update"),t._UZ(39,"i",31),t.qZA()()()()()(),t._UZ(40,"hr",32),t.qZA()}if(2&r){const e=o.$implicit;t.xp6(3),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(5),t.Oqu(e.product.title.split(" ").slice(0,2).join(" ")),t.xp6(4),t.Oqu(e.product.quantity),t.xp6(1),t.Q6J("ngIf",e.priceAfterDiscount),t.xp6(1),t.Q6J("ngIf",e.priceAfterDiscount),t.xp6(1),t.Q6J("ngIf",!e.priceAfterDiscount),t.xp6(5),t.Oqu(e.product.ratingsAverage),t.xp6(2),t.Q6J("ngForOf",t.DdM(10,b)),t.xp6(10),t.Oqu(e.count)}}const Z=function(r){return["/userAddress",r]},T=function(r){return["/cashDetails",r]};function U(r,o){if(1&r&&(t.TgZ(0,"div",37)(1,"button",38),t._uU(2,"Online Payment "),t._UZ(3,"img",39),t.qZA(),t.TgZ(4,"button",38),t._uU(5,"Cash Payment"),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(2,Z,e.userCartDetails._id)),t.xp6(3),t.Q6J("routerLink",t.VKq(4,T,e.userCartDetails._id))}}function I(r,o){1&r&&(t.TgZ(0,"div",40)(1,"p",41),t._uU(2,"Your Cart is empty "),t._UZ(3,"img",42),t.qZA()())}function D(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"section",1)(1,"div",2)(2,"div")(3,"h1"),t._uU(4,"My Cart"),t.qZA(),t.TgZ(5,"p",3),t._uU(6,"Total Price : "),t.TgZ(7,"span",4),t._uU(8),t.ALo(9,"currency"),t.qZA()()(),t.TgZ(10,"div")(11,"button",5,6),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(12),c=t.oxw();return t.KtG(c.removeCart(n))}),t._uU(13,"Clear Cart "),t._UZ(14,"i",7),t.qZA()()(),t.YNc(15,A,41,11,"div",8),t.YNc(16,U,6,6,"div",9),t.YNc(17,I,4,0,"div",10),t.qZA()}if(2&r){const e=t.oxw();t.xp6(8),t.Oqu(t.xi3(9,4,e.userCartDetails.totalCartPrice," EGP ")),t.xp6(7),t.Q6J("ngForOf",e.userCartDetails.products),t.xp6(1),t.Q6J("ngIf",1==e.cartItems),t.xp6(1),t.Q6J("ngIf",0==e.cartItems)}}let O=(()=>{class r{constructor(e,i,n){this._CartService=e,this._Renderer2=i,this._ToastrService=n,this.cartItems=!0}ngOnInit(){this._CartService.getUserCart().subscribe({next:e=>{this.userCartDetails=e.data,0==e.numOfCartItems&&(this.cartItems=!1)},error:e=>{this.cartItems=!1,this.userCartDetails={totalCartPrice:0}}})}deleteItem(e,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.deleteItem(e).subscribe({next:n=>{this._Renderer2.removeAttribute(i,"disabled"),this.userCartDetails=n.data,this._CartService.cartItemsNumber.next(n.numOfCartItems),this._ToastrService.warning("the product was deleted from your cart","FreshCart"),0==n.numOfCartItems&&(this.cartItems=!1)},error:n=>{this._Renderer2.removeAttribute(i,"disabled")}})}UpdateItemCount(e,i,n){let c=Number(i.target.closest(".parent").children[1].innerText);this._Renderer2.setAttribute(n,"disabled","true"),this._CartService.updateItemCount(e,c).subscribe({next:u=>{this._Renderer2.removeAttribute(n,"disabled"),this.userCartDetails=u.data},error:u=>{this._Renderer2.removeAttribute(n,"disabled")}})}increaseCount(e){let i=Number(e.target.closest(".parent").children[1].innerText);i++,e.target.closest(".parent").children[1].innerText=i}minusCount(e){let i=Number(e.target.closest(".parent").children[1].innerText);i--,1==i&&(e.target.closest(".parent").children[1].innerText=1),i>1&&(e.target.closest(".parent").children[1].innerText=i)}removeCart(e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.deleteCart().subscribe({next:i=>{this._Renderer2.removeAttribute(e,"disabled"),this._CartService.cartItemsNumber.next(0),"success"==i.message&&(this.userCartDetails="",this.cartItems=!1,this.userCartDetails={totalCartPrice:0},this._ToastrService.warning("Your Cart is empty now","FreshCart"))},error:i=>{this._Renderer2.removeAttribute(e,"disabled")}})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(C.N),t.Y36(t.Qsj),t.Y36(l._W))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","bg-main-light my-3 p-4 ",4,"ngIf"],[1,"bg-main-light","my-3","p-4"],[1,"border","shadow","p-2","rounded-2","mb-3","d-flex","flex-wrap","justify-content-between","align-items-center"],[1,"h3"],[1,"text-main"],[1,"btn","btn-danger",3,"click"],["removeBtn",""],[1,"fa-solid","fa-trash","ms-2"],["class","row",4,"ngFor","ngForOf"],["class","d-flex flex-wrap payBtns gap-2",4,"ngIf"],["class","py-5 text-white rounded-2",4,"ngIf"],[1,"row"],[1,"col-md-2"],["height","250",1,"itemImg","w-100",3,"src","alt"],[1,"col-md-10"],[1,"itemDetailsBox","d-flex","flex-wrap","align-items-center","h-100","gap-2"],[1,"h5","my-2"],[1,"h6","mb-0"],["class","priceBSale position-relative",4,"ngIf"],[4,"ngIf"],[1,"me-2"],["class","fa-solid fa-star",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn-main","bg-danger","mt-2",3,"click"],["deleteBtn",""],[1,"parent"],[1,"btn-main","px-3","py-1",3,"click"],[1,"fa-solid","fa-plus"],[1,"m-auto","mx-2"],[1,"fa-solid","fa-minus"],[1,"btn-main","px-3","py-2","w-100","mt-2",3,"click"],["updateBtn",""],[1,"fa-solid","fa-arrows-rotate","ms-2"],[1,"mt-3"],[1,"priceBSale","position-relative"],[1,"text-danger","small"],[1,"discountLine","position-absolute","bg-danger","top-50","start-50","translate-middle","w-100"],[1,"fa-solid","fa-star",3,"ngClass"],[1,"d-flex","flex-wrap","payBtns","gap-2"],[1,"btn-main","payment","py-1","px-2","ms-2",3,"routerLink"],["src","./assets/images/visa-1.svg","alt","visa.img",1,"ms-2"],[1,"py-5","text-white","rounded-2"],[1,"text-center","h1","text-danger"],["src","./assets/images/emptyCartEdited.png","alt","","height","150"]],template:function(i,n){1&i&&t.YNc(0,D,18,7,"section",0),2&i&&t.Q6J("ngIf",n.userCartDetails)},dependencies:[_.ez,_.mk,_.sg,_.O5,_.H9,p.rH],styles:[".itemDetailsBox[_ngcontent-%COMP%]{justify-content:space-between}@media screen and (max-width: 500px){.itemImg[_ngcontent-%COMP%]{height:250px}.payBtns[_ngcontent-%COMP%]{justify-content:center;align-items:center}}@media screen and (max-width: 359px){.itemDetailsBox[_ngcontent-%COMP%]{align-items:center;justify-content:center;text-align:center}}"]})}return r})()},6286:(f,m,s)=>{s.d(m,{N:()=>C});var _=s(5619),p=s(4769),t=s(9862);let C=(()=>{class l{constructor(a){this._HttpClient=a,this.cartItemsNumber=new _.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/cart/"}addToCart(a){return this._HttpClient.post(this.baseUrl,{productId:a})}getUserCart(){return this._HttpClient.get(this.baseUrl)}deleteItem(a){return this._HttpClient.delete(this.baseUrl+a)}updateItemCount(a,d){return this._HttpClient.put(this.baseUrl+a,{count:d})}deleteCart(){return this._HttpClient.delete(this.baseUrl)}static#t=this.\u0275fac=function(d){return new(d||l)(p.LFG(t.eN))};static#e=this.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()}}]);